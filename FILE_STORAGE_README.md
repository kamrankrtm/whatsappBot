# سیستم ذخیره‌سازی فایلی برای بات واتساپ

این سیستم جایگزین پایگاه داده MySQL/MongoDB با یک سیستم ذخیره‌سازی فایلی ساده است. با این سیستم، پیکربندی‌های بات واتساپ در فایل‌های JSON محلی ذخیره می‌شوند و نیازی به اتصال به پایگاه داده ندارید.

## مزایا

1. **ساده‌تر**: بدون نیاز به پیکربندی و مدیریت پایگاه داده
2. **قابل حمل**: راحت‌تر در محیط‌های مختلف مانند Liara قابل استفاده است
3. **بدون مشکلات اتصال**: خطاهای اتصال به پایگاه داده برطرف می‌شوند
4. **سبک‌تر**: منابع کمتری مصرف می‌کند

## نحوه عملکرد

فایل `fileStorage.js` یک سیستم ذخیره‌سازی مبتنی بر فایل پیاده‌سازی می‌کند که همان واسط (interface) مدل `BotConfig` قبلی را فراهم می‌کند.

این سیستم:
- یک پوشه `storage` در مسیر اصلی برنامه ایجاد می‌کند
- پیکربندی‌های بات را در یک فایل JSON به نام `bot_configs.json` ذخیره می‌کند
- همان متدهای مدل قبلی مانند `find()`, `findOne()`, `create()`, و غیره را فراهم می‌کند

## نحوه استفاده

اگر پایگاه داده MySQL شما در دسترس باشد، برنامه به طور معمول از آن استفاده می‌کند.
اما اگر به هر دلیلی (مانند مشکلات اتصال یا پیکربندی ناقص) پایگاه داده در دسترس نباشد، سیستم به طور خودکار به ذخیره‌سازی فایلی سوئیچ می‌کند.

برای استفاده اجباری از ذخیره‌سازی فایلی، می‌توانید متغیرهای محیطی پایگاه داده را پاک کنید یا آنها را با مقادیر نادرست تنظیم کنید.

## فایل‌های ذخیره‌سازی

- **bot_configs.json**: پیکربندی‌های بات شامل نام، شماره تلفن، وضعیت، پیام خوش‌آمدگویی و پاسخ‌های خودکار

## نکات مهم

1. **پشتیبان‌گیری**: به طور منظم از پوشه `storage` پشتیبان‌گیری کنید
2. **اشتراک‌گذاری**: اگر برنامه را در چند نمونه اجرا می‌کنید، هر نمونه فایل‌های ذخیره‌سازی خود را خواهد داشت و آنها را به اشتراک نمی‌گذارند
3. **محدودیت‌ها**: این سیستم برای کاربردهای کوچک تا متوسط طراحی شده و برای حجم بالای داده مناسب نیست

## عیب‌یابی

اگر با مشکلی مواجه شدید:

1. بررسی کنید پوشه `storage` و فایل‌های داخل آن قابل نوشتن باشند
2. فایل `bot_configs.json` را بررسی کنید تا مطمئن شوید JSON معتبر است
3. اگر فایل آسیب دیده است، آن را با یک آرایه خالی `[]` جایگزین کنید 